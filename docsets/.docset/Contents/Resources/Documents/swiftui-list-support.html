<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SwiftUI List Support  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="SwiftUI List Support  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html"> Docs</a> (88% documented)</p>
        <p class="header-right"><a href="https://github.com/StevenLambion/SwiftDux"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html"> Reference</a>
        <img id="carat" src="img/carat.png" />
        SwiftUI List Support  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="installation.html">Installation</a>
              </li>
              <li class="nav-group-task">
                <a href="getting-started.html">Getting Started</a>
              </li>
              <li class="nav-group-task">
                <a href="composing-reducers.html">Composing Reducers</a>
              </li>
              <li class="nav-group-task">
                <a href="swiftui-list-support.html">SwiftUI List Support</a>
              </li>
              <li class="nav-group-task">
                <a href="persisting-state.html">Persisting State</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="State.html">State</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="State.html#/s:8SwiftDux9StateTypea">StateType</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/IdentifiableState.html">IdentifiableState</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/OrderedState.html">OrderedState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Actions.html">Actions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Actions.html#/s:8SwiftDux6ActionP">Action</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ActionPlan.html">ActionPlan</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ActionDispatcher.html">ActionDispatcher</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ActionSubscriber.html">ActionSubscriber</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/RunnableAction.html">RunnableAction</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EmptyAction.html">EmptyAction</a>
              </li>
              <li class="nav-group-task">
                <a href="Actions.html#/s:8SwiftDux10SendActiona">SendAction</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Store.html">Store</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/Store.html">Store</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Reducer.html">Reducer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StoreProxy.html">StoreProxy</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CombinedReducer.html">CombinedReducer</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/StoreAction.html">StoreAction</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="SwiftUI.html">SwiftUI</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/View.html">View</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MappedState.html">MappedState</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MappedDispatch.html">MappedDispatch</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ConnectableView.html">ConnectableView</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ActionBinder.html">ActionBinder</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ActionBinding.html">ActionBinding</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Middleware.html">Middleware</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/Middleware.html">Middleware</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CombinedMiddleware.html">CombinedMiddleware</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/HandleActionMiddleware.html">HandleActionMiddleware</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Publisher.html">Publisher</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/RangeReplaceableCollection.html">RangeReplaceableCollection</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/Connectable.html">Connectable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/OnActionViewModifier.html">OnActionViewModifier</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/OnAppearDispatchActionPlanViewModifier.html">OnAppearDispatchActionPlanViewModifier</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/OnAppearDispatchActionViewModifier.html">OnAppearDispatchActionViewModifier</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StoreProviderViewModifier.html">StoreProviderViewModifier</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Typealiases.html">Other Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other%20Typealiases.html#/s:8SwiftDux11StateBindera">StateBinder</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='swiftui-list-support' class='heading'>SwiftUI List Support</h1>

<p>It&rsquo;s typical for an application to display an ordered list of domain objects to a user. This is simple enough to implement, but what if you need to perform an action on one of these objects using their id?</p>

<p>In this type of architecture, there&rsquo;s a commonly used pattern. In the state, you&rsquo;d have a dictionary of objects by id and then an ordered array of the ids:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">AppState</span> <span class="p">:</span> <span class="kt">StateType</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">books</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span><span class="kt">Book</span><span class="p">]</span>
  <span class="k">var</span> <span class="nv">orderOfBooks</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span>

<span class="c1">// get a book by id:</span>
<span class="n">state</span><span class="o">.</span><span class="n">books</span><span class="p">[</span><span class="s">"123"</span><span class="p">]</span>

<span class="c1">// Get all books in order:</span>
<span class="n">state</span><span class="o">.</span><span class="n">orderOfBooks</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">state</span><span class="o">.</span><span class="n">books</span><span class="p">[</span><span class="nv">$0</span><span class="p">]</span> <span class="p">}</span>
</code></pre>
<h2 id='using-code-orderedstate-lt-_-gt-code' class='heading'>Using <code><a href="Structs/OrderedState.html">OrderedState&lt;_&gt;</a></code></h2>

<p>SwiftDux provides a prebuilt collection type to handle this pattern automatically called <code><a href="Structs/OrderedState.html">OrderedState&lt;_&gt;</a></code>:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">AppState</span> <span class="p">:</span> <span class="kt">StateType</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">books</span><span class="p">:</span> <span class="kt">OrderedState</span><span class="o">&lt;</span><span class="kt">Book</span><span class="o">&gt;</span>
<span class="p">}</span>

<span class="c1">// get a book by id:</span>
<span class="n">state</span><span class="o">.</span><span class="n">books</span><span class="p">[</span><span class="s">"123"</span><span class="p">]</span>

<span class="c1">// Get all books in order:</span>
<span class="n">state</span><span class="o">.</span><span class="n">books</span><span class="o">.</span><span class="n">values</span>
</code></pre>
<h2 id='setting-up-the-reducer' class='heading'>Setting up the Reducer</h2>

<p>The <code><a href="Structs/OrderedState.html">OrderedState&lt;_&gt;</a></code> can be used like any other state. It also provides methods that map directly to events triggered by list views in SwiftUI. This allows actions to simply pass down the event parameters directly to the <code><a href="Structs/OrderedState.html">OrderedState&lt;_&gt;</a></code> object. Below is an example of this.</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">AppAction</span> <span class="p">{</span>
  <span class="k">case</span> <span class="nf">setBooks</span><span class="p">([</span><span class="kt">Book</span><span class="p">])</span>
  <span class="k">case</span> <span class="nf">moveBooks</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="kt">IndexSet</span><span class="p">,</span> <span class="nv">to</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span>
  <span class="k">case</span> <span class="nf">removeBooks</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="kt">IndexSet</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="kt">AppReducer</span> <span class="p">:</span> <span class="kt">Reducer</span> <span class="p">{</span>

  <span class="nf">reduce</span><span class="p">(</span><span class="nv">state</span><span class="p">:</span> <span class="kt">AppState</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="kt">AppAction</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">AppState</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">state</span> <span class="o">=</span> <span class="n">state</span>
    <span class="k">switch</span> <span class="n">action</span> <span class="p">{</span>
      <span class="k">case</span> <span class="o">.</span><span class="nf">setBooks</span><span class="p">(</span><span class="k">let</span> <span class="nv">books</span><span class="p">):</span>
        <span class="n">state</span><span class="o">.</span><span class="n">books</span> <span class="o">=</span> <span class="kt">OrderedState</span><span class="p">(</span><span class="n">books</span><span class="p">)</span>
      <span class="k">case</span> <span class="o">.</span><span class="nf">moveBooks</span><span class="p">(</span><span class="k">let</span> <span class="nv">indexSet</span><span class="p">,</span> <span class="k">let</span> <span class="nv">index</span><span class="p">):</span>
        <span class="n">state</span><span class="o">.</span><span class="n">books</span><span class="o">.</span><span class="nf">move</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="n">indexSet</span><span class="p">,</span> <span class="nv">to</span><span class="p">:</span> <span class="n">index</span><span class="p">)</span>
      <span class="k">case</span> <span class="o">.</span><span class="nf">removeBooks</span><span class="p">(</span><span class="k">let</span> <span class="nv">indexSet</span><span class="p">):</span>
        <span class="n">state</span><span class="o">.</span><span class="n">books</span><span class="o">.</span><span class="nf">remove</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="n">indexSet</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre>
<h2 id='setting-up-the-list-view' class='heading'>Setting Up the List View</h2>

<p>Create a typical view that takes a list of items. Define callback closures for each kind of list event supported. <code><a href="Structs/OrderedState.html">OrderedState&lt;_&gt;</a></code> can be used directly by List elements.</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">BookListView</span> <span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>

  <span class="kd">@MappedState</span> <span class="k">var</span> <span class="nv">state</span><span class="p">:</span> <span class="kt">AppState</span>
  <span class="kd">@MappedDispatch</span><span class="p">()</span> <span class="k">var</span> <span class="nv">dispatch</span>

  <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kt">List</span> <span class="p">{</span>
      <span class="kt">ForEach</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">books</span><span class="p">)</span> <span class="p">{</span> <span class="n">item</span> <span class="k">in</span>
        <span class="kt">BookRow</span><span class="p">(</span><span class="nv">item</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="o">.</span><span class="n">onMove</span> <span class="p">{</span> <span class="k">self</span><span class="o">.</span><span class="nf">dispatch</span><span class="p">(</span><span class="kt">AppAction</span><span class="o">.</span><span class="nf">moveBooks</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="nv">$0</span><span class="p">,</span> <span class="nv">to</span><span class="p">:</span> <span class="nv">$1</span><span class="p">))</span> <span class="p">}</span>
      <span class="o">.</span><span class="n">onDelete</span> <span class="p">{</span> <span class="k">self</span><span class="o">.</span><span class="nf">dispatch</span><span class="p">(</span><span class="kt">AppAction</span><span class="o">.</span><span class="nf">removeBooks</span><span class="p">(</span><span class="nv">at</span><span class="p">:</span> <span class="nv">$0</span><span class="p">))</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">RootView</span> <span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>

  <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kt">BookListContainer</span><span class="o">.</span><span class="nf">connect</span><span class="p">()</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2020 <a class="link" href="" target="_blank" rel="external"></a>. All rights reserved. (Last updated: 2020-05-02)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
